<!doctype html><html lang=zh dir=ltr class=dark><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Typst 初體驗 | Nyanyannya</title><meta name=generator content="Hugo Eureka 0.9.3"><link rel=stylesheet href=https://pixelcat31415.github.io/blog/css/eureka.min.20bf94c567492e2ea21b897b2a393ba2983300cfd37b3b5230fda8031e17e158c857d7836412680573ad3fb8bf13c24c.css><link rel=stylesheet href=https://pixelcat31415.github.io/blog/css/custom.min.c2e31c90f8a39864d5629307aade5b55274d6136c9ccfadcc74e713cc3974070.css><script defer src=https://pixelcat31415.github.io/blog/js/custom.min.875ea4498b8d9bd2a60fb29a1001fd9ad6e1b57892b66ef7cabd1dddf63f0ed9445c8abe0299bed48a8d26c53b664121.js></script>
<script defer src=https://pixelcat31415.github.io/blog/js/eureka.min.fa9a6bf6d7a50bb635b4cca7d2ba5cf3dfb095ae3798773f1328f7950028b48c17d06276594e1b5f244a25a6c969a705.js></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><script defer type=text/javascript src=https://pixelcat31415.github.io/blog/js/fontawesome.min.d7a06596d5235d9f1b5059e0ae8884040d48f9219364c0e1651316fe993117293d949acaa248654110fb3ba464959bed.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><link rel=icon type=image/png sizes=32x32 href=https://pixelcat31415.github.io/blog/images/icon_hu4ecd239f579111d388d3334bfa697660_2793_32x32_fill_box_center_3.png><link rel=apple-touch-icon sizes=180x180 href=https://pixelcat31415.github.io/blog/images/icon_hu4ecd239f579111d388d3334bfa697660_2793_180x180_fill_box_center_3.png><meta name=description content="大概上學期聽說有 Typst 這個東西，據說是一群討厭 LaTeX 的人想搞個替代方案，過完年終於有個小空檔可以來試試看。 學一個禮拜覺得使用體驗太棒了，以後都不想再用 LaTeX 了 😋 關"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://pixelcat31415.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Typst 初體驗","item":"https://pixelcat31415.github.io/blog/2025/03/typst-first-try/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://pixelcat31415.github.io/blog/2025/03/typst-first-try/"},"headline":"Typst 初體驗 | Nyanyannya","datePublished":"2025-03-05T14:48:24+08:00","dateModified":"2025-03-05T14:48:24+08:00","wordCount":1905,"publisher":{"@type":"Person","name":"PixelCat","logo":{"@type":"ImageObject","url":"https://pixelcat31415.github.io/blog/images/icon.png"}},"description":"大概上學期聽說有 Typst 這個東西，據說是一群討厭 LaTeX 的人想搞個替代方案，過完年終於有個小空檔可以來試試看。 學一個禮拜覺得使用體驗太棒了，以後都不想再用 LaTeX 了 😋 關"}</script><meta property="og:title" content="Typst 初體驗 | Nyanyannya"><meta property="og:type" content="article"><meta property="og:image" content="https://pixelcat31415.github.io/blog/images/icon.png"><meta property="og:url" content="https://pixelcat31415.github.io/blog/2025/03/typst-first-try/"><meta property="og:description" content="大概上學期聽說有 Typst 這個東西，據說是一群討厭 LaTeX 的人想搞個替代方案，過完年終於有個小空檔可以來試試看。 學一個禮拜覺得使用體驗太棒了，以後都不想再用 LaTeX 了 😋 關"><meta property="og:locale" content="zh"><meta property="og:site_name" content="Nyanyannya"><meta property="article:published_time" content="2025-03-05T14:48:24+08:00"><meta property="article:modified_time" content="2025-03-05T14:48:24+08:00"><meta property="article:section" content="posts"><meta property="article:tag" content="Typst"><body class="flex min-h-screen flex-col"><header class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"><div class="mx-auto w-full max-w-screen-xl"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");(storageColorScheme=="Auto"&&window.matchMedia("(prefers-color-scheme: light)").matches||storageColorScheme=="Light")&&document.getElementsByTagName("html")[0].classList.remove("dark")</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/blog class="me-6 text-primary-text text-xl font-bold">Nyanyannya</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/blog/about class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">About</a>
<a href=/blog/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Posts</a></div><div class=flex><div class="relative pt-4 md:pt-0" hidden><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-moon"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>Light</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>Dark</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>Auto</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById("lightDarkMode");storageColorScheme=="Auto"?(element.firstElementChild.classList.remove("fa-moon"),element.firstElementChild.setAttribute("data-icon","adjust"),element.firstElementChild.classList.add("fa-adjust"),document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",switchDarkMode)})):storageColorScheme=="Light"&&(element.firstElementChild.classList.remove("fa-moon"),element.firstElementChild.setAttribute("data-icon","sun"),element.firstElementChild.classList.add("fa-sun")),document.addEventListener("DOMContentLoaded",()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl lg:px-4 xl:px-8"><div class="grid grid-cols-2 gap-4 lg:grid-cols-8 lg:pt-12"><div class="bg-secondary-bg col-span-2 rounded px-6 py-8 lg:col-span-6"><article class="prose post-article"><div class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center post-metadata"><div class="me-6 my-2"><i class="fas fa-calendar me-1"></i>
<span>2025-03-05</span></div><div class="me-6 my-2"><i class="fas fa-edit me-1"></i>
<span>2025-03-05</span></div><div class="me-6 my-2"><i class="fas fa-tags me-1"></i>
<a href=https://pixelcat31415.github.io/blog/tags/typst/ class=hover:text-eureka>Typst</a></div></div><h1 class=mb-4>Typst 初體驗</h1><p class=post-article-description></p><hr><div class=post-article-content><p>大概上學期聽說有 Typst 這個東西，據說是一群討厭 LaTeX 的人想搞個替代方案，過完年終於有個小空檔可以來試試看。</p><p>學一個禮拜覺得使用體驗太棒了，以後都不想再用 LaTeX 了 😋</p><h2 id=關於-typst-和使用感想>關於 Typst 和使用感想</h2><p>基本上就是個 LaTeX 的替代品，可以寫字、寫數學式、排版之類的。最大的不一樣是 Typst 內建一個 scripting language，可以用腳本的形式控制要輸出什麼，像是寫程式一樣。LaTeX 仰賴很多反斜線開頭的 macro，很難做到像寫程式一樣條件判斷或迴圈之類的事情；typst 裡面幾乎看不見反斜線，寫指令的方式幾乎跟一般程式語言沒什麼差。</p><p>另一個我很喜歡的地方是 typst 的排版邏輯大概可以用 HTML DOM tree 的那套概念理解，一下就有一種親切感，哪裡歪歪的看不順眼還知道要改哪裡。相比之下至今還是覺得 latex 的各種 spacing 很玄學。</p><p>Typst 的數學模式寫法也跟 LaTeX 差很多，最有感的是分數不用再 <code>\frac{}{}</code> 了，大幅改善生活品質。各種符號不用再一直反斜線還不錯。但是很多符號的名字跟 LaTeX 不一樣，又要再重記一套，覺得相當不舒服，尤其是箭頭系列，至少讓我 alias 一下 LaTeX 的舊名字吧。用小括號取代大括號我也覺得沒什麼必要又違反習慣。不過整體來說應該還是改善的部份比較多。</p><p>LaTeX 其中一個最強的用途是用 TikZ 畫圖，typst 也有對應的工具叫 CeTZ。雖然 CeTZ 有些功能沒那麼齊全，但是基本上 TikZ 辦得到的 CeTZ 沒什麼辦不到，配上 typst 內建的 scripting language 有一種能夠寫程式畫圖的感覺，比 TikZ 多太多自由了。</p><p>Typst 還有一個大優勢是完整的文件和看得懂的原始碼。<a href=https://typst.app/docs/>官方文件</a>有完整的 language/library reference 和新手教學，想找指令或是什麼指令不會用都可以很快找到；typst 還有開源在 <a href=https://github.com/typst/typst>GitHub</a> 上，原始碼是用 rust 寫的，真的想找更深的東西也挖得到（像是去找一些預設樣式之類的）。相較 LaTeX 比較仰賴論壇上各種奇怪的討論串的奇怪黑魔法指令，我相當喜歡 typst 的透明度。</p><p>Typst 另外一個優勢是編譯賊快，還支援 live preview，比隔壁編譯一次要幾秒的 LaTeX 舒服多了。</p><p>底下紀錄一下我用 Typst 搞的一些東西。</p><h2 id=cetz-版本-remember-picture--overlay>CeTZ 版本 Remember Picture & Overlay</h2><p>TikZ 有兩個選項叫 remember picture 和 overlay，可以讓你在其他字上面疊一張 TikZ 的圖，還可以定位一張紙上面的其他內容。像是這樣（這是我的某次 SP 作業）</p><p><img src=https://pixelcat31415.github.io/blog/images/typst-1.png alt="tikz overlay"></p><p>截圖上所有字和橫的虛線是一般 LaTeX 表格，箭頭是蓋上去的 TikZ picture，箭頭端點是一個 TikZ coordinate。</p><p>不過這些都不是重點，重點是我想在 Typst 重現：</p><ol><li>在整個頁面的任意位置蓋 CeTZ canvas</li><li>能夠插入行內定位點，在 CeTZ canvas 裡定位他們</li></ol><p>最大的障礙是 CeTZ 不能讓你 reference 其他 CeTZ canvas 上的元素，所以 TikZ 那套沒辦法照搬。</p><p>最後的解決辦法是用 <a href=https://typst.app/docs/reference/foundations/label/>label</a> 當定位點，加上 <a href=https://typst.app/docs/reference/introspection/locate/>locate</a> 可以拿到一個定位點的座標。canvas 可以裝在 <a href=https://typst.app/docs/reference/layout/place/>place</a> 裡面，定好 canvas 位置和單位長就可以準確重現那些位置。code 大概像下面這樣。</p><pre tabindex=0><code class=language-typst data-lang=typst>#let marker(label-name) = {
  context {
    box(height: measure(&#34;&#34;).height, place(horizon)[#[] #label(label-name)])
    sym.wj
    h(0pt, weak: true)
  }
}

#let find(label-name) = {
  let pos = locate(label(label-name)).position()
  (pos.x.pt(), -pos.y.pt())
}

#let overlay(body) = {
  place(top + left, dx: -page.margin.left, dy: -page.margin.top)[
    #canvas({
      draw.circle((1, -1), radius: 1, fill: none, stroke: none)
      body
    }, length: 1pt, padding: 0)
  ]
}
</code></pre><p>overlay 裡面的那個隱形小圓形是為了讓 canvas 乖乖把紙張最左上角當 (0, 0)。但是因為這個作法，有一個小瑕疵可能是如果畫圖畫到超出頁面上面和左邊的邊界，整個圖的位置都會跑掉，還沒認真想過怎麼解決這個問題。</p><p>最後 code 其實很短，不過那時候好像搞了很久，skill issue。實際效果大概像這樣。</p><p><img src=https://pixelcat31415.github.io/blog/images/typst-2.png alt="cetz overlay"></p><h2 id=cetz-線段樹>CeTZ 線段樹</h2><p>之前用 TikZ 畫過最複雜的圖應該是做 IOIC 講義和投影片的時候畫線段樹和 treap。但是 LaTeX 在常理範圍內沒辦法寫程式，所以我都用 python 或 C++ 產生 TikZ code 然後用手複製到 LaTeX 裡面（現在想一想根本就應該產生一個 .tex 檔案然後 <code>\input</code>，不過應該也沒有不麻煩多少）。這個流程我覺得有點麻煩，哪裡顏色或間距看不順眼的話 <em>改指令 ➡️ 重新生 TikZ code ➡️ LaTeX 編譯 ➡️ 看到結果</em> 的過程也有點太久。</p><p>（那些說 <a href=https://www.overleaf.com/learn/latex/Articles/LaTeX_is_More_Powerful_than_you_Think_-_Computing_the_Fibonacci_Numbers_and_Turing_Completeness>LaTeX 是 turing complete</a> 的，歡迎你先用 LaTeX 寫一棵線段樹給我看。你寫出來了我也不寫，我承認我不夠會寫程式好不好。我都寧願用組合語言寫線段樹。）</p><p>自帶 scripting language 的 typst 幾乎能解決所有不舒服，只要用 typst 寫一棵線段樹就好了。線段樹誰不會寫，唯一比較特別的是在 typst 函數裡面，只有參數和區域變數是可以修改的，外面的 scope 的變數都是 read only，所以線段樹要寫成持久化 <code>seg = update(seg)</code> 之類的那種形狀。</p><p><img src=https://pixelcat31415.github.io/blog/images/typst-3.png alt="segment tree 1"></p><p><img src=https://pixelcat31415.github.io/blog/images/typst-4.png alt="segment tree 2"></p><p>上面的圖都是從原本的序列自動畫出來的。code 我就不放了，有點長。老實說這樣寫碼量可能沒有少很多，但是從改 code 到看見畫面的時間短很多，還能更細緻的控制節點怎麼畫，我覺得還是不錯的。</p><h2 id=code-block>Code Block</h2><p><img src=https://pixelcat31415.github.io/blog/images/typst-5.png alt></p><p>大概是比較沒創意的一個。我想加的是行號、背景色、highlight 指定行數之類的，實際辦法是開一個表格，第一欄是行號，第二欄是程式碼，一列放一行 <a href=https://typst.app/docs/reference/text/raw/#definitions-line>line</a>。</p><p>寫完之後才發現早就有人做過遠遠比這個更完整的套件 <a href=https://typst.app/universe/package/codelst/>codelst</a> 了 🤡 🤡 🤡</p><h2 id=下一步>下一步</h2><p>還真不知道下一步是什麼 💤</p><p>之前用 LaTeX 最多的課應該是 ADA、NASA 和 ML，這學期的課比較多要寫程式不用寫 report。IOIC 的話要換到 typst 有點沒那麼實際。總之好像暫時可能用不太到 typst。</p><p>不過 typst 寫起來還是很舒服的，哪天一定會派上用場。</p></div></article><div class=post-tags><div class=mt-4><span><i class="fas fa-tags me-1" style=width:20px></i>
標籤：</span>
<a href=https://pixelcat31415.github.io/blog/tags/typst/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 me-2 hover:text-eureka">#Typst</a></div><div class=mb-4></div></div><div class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">prev</span>
<a href=https://pixelcat31415.github.io/blog/2025/01/courses-review-2024fall/ class=block>大二上修課心得（2024 Fall）</a></div><div class="mt-4 md:mt-0 md:text-right"></div></div></div><div class=col-span-2><div class="bg-secondary-bg rounded sticky-toc"><div class="px-6 pt-6"><h1 class=toc-title>Typst 初體驗</h1></div><div class="sticky-toc hidden px-6 py-4 lg:block toc-content"><nav id=TableOfContents><ul><li><a href=#關於-typst-和使用感想>關於 Typst 和使用感想</a></li><li><a href=#cetz-版本-remember-picture--overlay>CeTZ 版本 Remember Picture & Overlay</a></li><li><a href=#cetz-線段樹>CeTZ 線段樹</a></li><li><a href=#code-block>Code Block</a></li><li><a href=#下一步>下一步</a></li></ul></nav></div></div><script>window.addEventListener("DOMContentLoaded",()=>{enableStickyToc()})</script></div></div></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text"></p></div></div></footer></body></html>